(function(){var c,a,b,e,h,j,g,f,d;g=typeof exports!=="undefined"&&exports!==null?exports:this;d=React.DOM,a=d.div,e=d.i,b=d.form,f=d.ul,j=d.li,h=d.input;c=React.createClass({displayName:"Search",componentDidMount:function(){return this.refs.searchInput.getDOMNode().focus()},getInitialState:function(){return{results:null,index:0}},incrementIndex:function(){var i;i=this.state.index+1;if(i>=this.state.results.length){i=0}return this.setState({index:i})},goToItem:function(){return window.location=this.state.results[this.state.index].Url},decrementIndex:function(){var i;i=this.state.index-1;if(i<0){i=this.state.results.length-1}return this.setState({index:i})},search:function(k){var i;if(k.keyCode===40){this.incrementIndex()}if(k.keyCode===38){this.decrementIndex()}if(k.keyCode===13){this.goToItem()}i=this.refs.searchInput.getDOMNode().value;if(i===""){this.setState({results:null,index:0});return}k.preventDefault();return $.ajax({type:"get",url:"/search",dataType:"json",data:{q:i},success:(function(l){return function(m){return l.setState({results:m})}})(this)})},searchResults:function(){return a({className:"search--results"},f({},this.state.results.map((function(i){return function(m,k){var l;l=k===i.state.index?"search--selected":"";return j({},a({className:"search--row "+l},a({className:"search--title"},m.Title),a({className:"search--icons"},a({},m.Instructions.length+" Steps"),a({},m.Youtubes.length+" Videos"),a({},m.Articles.length+" Articles"))))}})(this))))},render:function(){return a({className:"search--form"},b({onSubmit:this.search},h({placeholder:"Dice...",className:"form-control",ref:"searchInput",onKeyUp:this.search})),this.state.results!=null?this.searchResults():void 0)}});g.search=c}).call(this);